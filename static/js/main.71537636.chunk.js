(this["webpackJsonpsd-0x-project-frontend-online-store"]=this["webpackJsonpsd-0x-project-frontend-online-store"]||[]).push([[0],{24:function(e,t,a){e.exports=a(40)},29:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(20),c=a.n(s),o=(a(29),a(16)),i=a(3),u=a(15),l=a(1),m=a.n(l),d=a(5),p=a(9),h=a(10),f=a(2),b=a(12),v=a(11);function k(){return g.apply(this,arguments)}function g(){return(g=Object(d.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.mercadolibre.com/sites/MLB/categories");case 2:return t=e.sent,a=t.json(),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e,t){return C.apply(this,arguments)}function C(){return(C=Object(d.a)(m.a.mark((function e(t,a){var n,r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.mercadolibre.com/sites/MLB/search?q=".concat(a));case 2:return n=e.sent,e.next=5,fetch("https://api.mercadolibre.com/sites/MLB/search?category=".concat(t));case 5:return r=e.sent,e.next=8,fetch("https://api.mercadolibre.com/sites/MLB/search?category=".concat(t,"&q=").concat(a));case 8:if(!(s=e.sent)){e.next=11;break}return e.abrupt("return",s.json());case 11:if(!n){e.next=13;break}return e.abrupt("return",n.json());case 13:if(!r){e.next=15;break}return e.abrupt("return",r.json());case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var y=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this.props,t=e.clickFunction,a=e.buttonText,n=e.itemsCount;return r.a.createElement("button",{"data-testid":"shopping-cart-button",type:"submit",onClick:t,className:"btn btn-outline-success cart-button"},a,r.a.createElement("span",{"data-testid":"shopping-cart-size",className:"items-count"},n))}}]),a}(n.Component),N=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this)).goToShopCart=function(){var t=e.props.history,a=e.state.shopCartItems;t.push("/shopcart/".concat(a))},e.searchProducts=e.searchProducts.bind(Object(f.a)(e)),e.renderResults=e.renderResults.bind(Object(f.a)(e)),e.renderCategories=e.renderCategories.bind(Object(f.a)(e)),e.setCategoryFilter=e.setCategoryFilter.bind(Object(f.a)(e)),e.addItemToShopCart=e.addItemToShopCart.bind(Object(f.a)(e)),e.itemsCount=e.itemsCount.bind(Object(f.a)(e)),e.state={productsList:void 0,categoriesList:void 0,shopCartItems:[],itemsCount:0},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=Object(d.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k();case 2:t=e.sent,this.setState({categoriesList:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCategoryFilter",value:function(){var e=Object(d.a)(m.a.mark((function e(t){var a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target,e.next=3,fetch("https://api.mercadolibre.com/sites/MLB/search?category=".concat(a.value));case 3:return n=e.sent,e.next=6,n.json();case 6:r=e.sent,this.setState({productsList:r.results});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"emptyListMessage",value:function(){return r.a.createElement("p",{"data-testid":"home-initial-message"},"Digite algum termo de pesquisa ou escolha uma categoria.")}},{key:"searchProducts",value:function(){var e=Object(d.a)(m.a.mark((function e(t){var a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target,n=a.parentElement.firstChild.value,e.next=4,E(n,n);case 4:r=e.sent,this.setState({productsList:r.results});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addItemToShopCart",value:function(e){this.setState((function(t){return{shopCartItems:[].concat(Object(u.a)(t.shopCartItems),[e]),itemsCount:Number(t.itemsCount)+1}}))}},{key:"itemsCount",value:function(){var e=this.state.itemsCount;return e}},{key:"renderResults",value:function(){var e=this,t=this.state,a=t.productsList,n=t.itemsCount;if(0===a.length)return r.a.createElement("p",null,"Nenhum produto foi encontrado");var s=r.a.createElement("span",{"data-testid":"free-shipping",className:"free-shipping"},"Frete Gr\xe1tis!");return r.a.createElement("div",{className:"items-container"},a.map((function(t){return r.a.createElement("div",{key:t.id,"data-testid":"product",className:"item-card"},r.a.createElement("div",{className:"item-info"},r.a.createElement("p",null,t.title),r.a.createElement("p",{className:"price"},t.price," ","reais"),r.a.createElement(o.b,{to:"/".concat(t.id,"/").concat(n),"data-testid":"product-detail-link",className:"more-info"},"Mais Informa\xe7\xf5es"),r.a.createElement("button",{type:"button","data-testid":"product-add-to-cart",onClick:function(){return e.addItemToShopCart(t.id)},className:"btn btn-outline-success"},"Adicionar ao carrinho"),t.shipping.free_shipping&&s),r.a.createElement("img",{src:t.thumbnail,alt:"Product"}))})))}},{key:"renderCategories",value:function(){var e=this;return this.state.categoriesList.map((function(t){return r.a.createElement("li",{key:t.id},r.a.createElement("label",{htmlFor:t.id,"data-testid":"category"},r.a.createElement("input",{id:t.id,name:"category",type:"radio",value:t.id,onChange:e.setCategoryFilter}),t.name))}))}},{key:"render",value:function(){var e=this.state,t=e.productsList,a=e.categoriesList,n=e.itemsCount;return r.a.createElement("div",{className:"home-container"},r.a.createElement("div",{className:"home-top"},r.a.createElement("div",null,r.a.createElement("input",{"data-testid":"query-input",className:"form-control"}),r.a.createElement("button",{type:"button","data-testid":"query-button",onClick:this.searchProducts,className:"btn btn-outline-success"},"Pesquisar")),r.a.createElement(y,{clickFunction:this.goToShopCart,buttonText:"Carrinho",itemsCount:n})),r.a.createElement("div",{className:"main-content-container"},r.a.createElement("ul",null,a&&this.renderCategories()),r.a.createElement("div",{className:"main-content"},t?this.renderResults():this.emptyListMessage())))}}]),a}(n.Component),j=(a(39),function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this)).setShopCartItems=e.setShopCartItems.bind(Object(f.a)(e)),e.goToCheckout=e.goToCheckout.bind(Object(f.a)(e)),e.addItem=e.addItem.bind(Object(f.a)(e)),e.state={shopCartItemsId:[],emptyCart:!0,cartItems:[]},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.items;t&&(this.setState({emptyCart:!1}),this.setState({shopCartItemsId:t.split(",")},(function(){return e.setShopCartItems()})))}},{key:"setShopCartItems",value:function(){var e=this,t=this.state.shopCartItemsId,a=[];t.forEach(function(){var t=Object(d.a)(m.a.mark((function t(n){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.requestItemInfo(n);case 2:r=t.sent,a.push(r.title),e.setState({cartItems:a});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"requestItemInfo",value:function(){var e=Object(d.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.mercadolibre.com/items/".concat(t));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"addItem",value:function(){var e=Object(d.a)(m.a.mark((function e(t,a){var n,r,s,c,o=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target,r=this.state.shopCartItemsId,s=Number(n.parentElement.firstChild.innerText),c=[],e.next=6,r.forEach(function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=c,e.next=3,o.requestItemInfo(t);case 3:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:500,setTimeout((function(){var e=c.find((function(e){return e.title===a}));console.log(e);s<e.available_quantity&&(s+=1),n.parentElement.firstChild.innerText=s}),500),console.log(a);case 9:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"subItem",value:function(e){var t=e.target,a=Number(t.parentElement.firstChild.innerText);a>1?a-=1:a=1,t.parentElement.firstChild.innerText=a}},{key:"goToCheckout",value:function(){this.props.history.push("/checkout")}},{key:"render",value:function(){var e=this,t=r.a.createElement("p",{"data-testid":"shopping-cart-empty-message"},"Seu carrinho est\xe1 vazio"),a=this.state,n=a.emptyCart,s=a.cartItems;return r.a.createElement("div",{className:"shop-cart"},n&&t,s.reverse().map((function(t,a){return r.a.createElement("div",{key:a,className:"checkout-item"},r.a.createElement("p",{"data-testid":"shopping-cart-product-name"},t),r.a.createElement("div",{className:"units-container"},r.a.createElement("p",{"data-testid":"shopping-cart-product-quantity",className:"units"},"1"),r.a.createElement("button",{type:"button","data-testid":"product-increase-quantity",onClick:function(){var a=Object(d.a)(m.a.mark((function a(n){return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",e.addItem(n,t));case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),className:"btn btn-outline-success"},"+"),r.a.createElement("button",{type:"button","data-testid":"product-decrease-quantity",onClick:e.subItem,className:"btn btn-outline-danger"},"-")))})),r.a.createElement("button",{type:"button","data-testid":"checkout-products",onClick:this.goToCheckout,className:"btn btn-success"},"Checkout"))}}]),a}(n.Component)),I=a(23),O=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(e){var n;Object(p.a)(this,a),(n=t.call(this)).goToShopCart=function(){var e=n.props.history,t=n.state.shopCartItems;e.push("/shopcart/".concat(t))},n.renderProductDetails=n.renderProductDetails.bind(Object(f.a)(n)),n.renderForms=n.renderForms.bind(Object(f.a)(n)),n.saveFormsInfo=n.saveFormsInfo.bind(Object(f.a)(n)),n.saveFeedback=n.saveFeedback.bind(Object(f.a)(n)),n.loadFeedbacks=n.loadFeedbacks.bind(Object(f.a)(n)),n.saveAllFeedbacks=n.saveAllFeedbacks.bind(Object(f.a)(n)),n.itemsCount=n.itemsCount.bind(Object(f.a)(n));var r=e.match.params.itemsCount;return n.state={productInfo:[],email:"",grade:"",comments:"",allFeedbacks:[],shopCartItems:[],itemsCount:r},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=Object(d.a)(m.a.mark((function e(){var t,a,n,r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadFeedbacks(),t=this.props.match.params,a=t.id,n=t.itemsCount,e.next=4,fetch("https://api.mercadolibre.com/items/".concat(a));case 4:return r=e.sent,e.next=7,r.json();case 7:s=e.sent,this.setState({productInfo:s,itemsCount:n});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addItemToShopCart",value:function(e){this.setState((function(t){return{shopCartItems:[].concat(Object(u.a)(t.shopCartItems),[e]),itemsCount:Number(t.itemsCount)+1}}))}},{key:"itemsCount",value:function(){var e=this.state.itemsCount;return e}},{key:"loadFeedbacks",value:function(){var e=this,t=localStorage.getItem("feedbacks");t&&JSON.parse(t).forEach((function(t){e.setState((function(e,a){return{allFeedbacks:[e.allFeedbacks,r.a.createElement("div",{key:a,className:"feedback"},r.a.createElement("p",{"data-testid":t.props.children[0].props["data-testid"]},t.props.children[0].props.children),r.a.createElement("p",null,"Nota:"," ",t.props.children[1].props.children[2]),r.a.createElement("p",{"data-testid":t.props.children[2].props["data-testid"]},t.props.children[2].props.children))]}}))}))}},{key:"saveFeedback",value:function(){var e=this,t=this.state,a=t.email,n=t.grade,s=t.comments,c=r.a.createElement("div",{key:a,className:"feedback"},r.a.createElement("p",{"data-testid":"product-detail-email"},a),r.a.createElement("p",null,"Nota:"," ",n),r.a.createElement("p",{"data-testid":"product-detail-evaluation"},s));this.setState((function(e){return{allFeedbacks:[].concat(Object(u.a)(e.allFeedbacks),[c])}}),(function(){return e.saveAllFeedbacks()}))}},{key:"saveAllFeedbacks",value:function(){var e=this.state.allFeedbacks;localStorage.setItem("feedbacks",JSON.stringify(e))}},{key:"saveFormsInfo",value:function(e){var t=e.target;this.setState(Object(I.a)({},t.name,t.value))}},{key:"renderProductDetails",value:function(){var e=this,t=this.state.productInfo,a=r.a.createElement("span",{"data-testid":"free-shipping",className:"free-shipping"},"Frete Gr\xe1tis!");return r.a.createElement("div",{className:"product-details-container"},r.a.createElement("div",{className:"item-card"},r.a.createElement("div",{className:"item-info"},r.a.createElement("p",{"data-testid":"product-detail-name"},t.title),r.a.createElement("p",null,t.price," ","reais"),r.a.createElement("button",{type:"button","data-testid":"product-detail-add-to-cart",onClick:function(){return e.addItemToShopCart(t.id)},className:"btn btn-outline-success"},"Adicionar ao carrinho"),0!==t.length&&t.shipping.free_shipping&&a),r.a.createElement("img",{src:t.thumbnail,alt:t.name})),this.renderForms())}},{key:"renderForms",value:function(){return r.a.createElement("div",{className:"form-container"},r.a.createElement("p",null,"Avalie o produto!"),r.a.createElement("input",{"data-testid":"product-detail-email",type:"text",name:"email",onChange:this.saveFormsInfo,className:"form-control",placeholder:"Email"}),r.a.createElement("div",null,r.a.createElement("label",{"data-testid":"1-rating",htmlFor:"grade1",className:"form-check-label grade-label"},r.a.createElement("input",{id:"grade1",type:"radio",name:"grade",value:"1",onChange:this.saveFormsInfo,className:"form-check-input"})," ","1"),r.a.createElement("label",{"data-testid":"2-rating",htmlFor:"grade2",className:"form-check-label grade-label"},r.a.createElement("input",{id:"grade2",type:"radio",name:"grade",value:"2",onChange:this.saveFormsInfo,className:"form-check-input"})," ","2"),r.a.createElement("label",{"data-testid":"3-rating",htmlFor:"grade3",className:"form-check-label grade-label"},r.a.createElement("input",{id:"grade3",type:"radio",name:"grade",value:"3",onChange:this.saveFormsInfo,className:"form-check-input"})," ","3"),r.a.createElement("label",{"data-testid":"4-rating",htmlFor:"grade4",className:"form-check-label grade-label"},r.a.createElement("input",{id:"grade4",type:"radio",name:"grade",value:"4",onChange:this.saveFormsInfo,className:"form-check-input"})," ","4"),r.a.createElement("label",{"data-testid":"5-rating",htmlFor:"grade5",className:"form-check-label grade-label"},r.a.createElement("input",{id:"grade5",type:"radio",name:"grade",value:"5",onChange:this.saveFormsInfo,className:"form-check-input"})," ","5")),r.a.createElement("textarea",{"data-testid":"product-detail-evaluation",name:"comments",onChange:this.saveFormsInfo,className:"form-control",placeholder:"Coment\xe1rio"}),r.a.createElement("button",{"data-testid":"submit-review-btn",type:"button",onClick:this.saveFeedback,className:"form-control btn btn-outline-success"},"Enviar"))}},{key:"render",value:function(){var e=this.state,t=e.allFeedbacks,a=e.itemsCount;return r.a.createElement("div",{className:"product-details"},r.a.createElement(y,{clickFunction:this.goToShopCart,buttonText:"Carrinho",itemsCount:a}),this.renderProductDetails(),t)}}]),a}(n.Component),F=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this)).goHome=e.goHome.bind(Object(f.a)(e)),e}return Object(h.a)(a,[{key:"goHome",value:function(){this.props.history.push("/")}},{key:"render",value:function(){return r.a.createElement("div",{className:"checkout"},r.a.createElement("form",{className:"cadastro",onSubmit:this.goHome},r.a.createElement("p",null,"Fa\xe7a seu cadastro!"),r.a.createElement("input",{className:"form-control","data-testid":"checkout-fullname",placeholder:"Nome completo",required:!0}),r.a.createElement("input",{className:"form-control","data-testid":"checkout-email",placeholder:"Email",required:!0}),r.a.createElement("input",{className:"form-control","data-testid":"checkout-cpf",placeholder:"CPF",required:!0}),r.a.createElement("input",{className:"form-control","data-testid":"checkout-phone",placeholder:"Celular",required:!0}),r.a.createElement("input",{className:"form-control","data-testid":"checkout-cep",placeholder:"CEP",required:!0}),r.a.createElement("input",{className:"form-control","data-testid":"checkout-address",placeholder:"Endere\xe7o",required:!0}),r.a.createElement("input",{type:"submit",className:"btn btn-outline-success",value:"Finalizar Compra",required:!0})))}}]),a}(n.Component);var x=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(o.a,null,r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/",exact:!0,component:N}),r.a.createElement(i.a,{path:"/shopcart/:items",exact:!0,component:j}),r.a.createElement(i.a,{path:"/shopcart",exact:!0,component:j}),r.a.createElement(i.a,{path:"/checkout",exact:!0,component:F}),r.a.createElement(i.a,{path:"/:id/:itemsCount",exact:!0,component:O}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[24,1,2]]]);
//# sourceMappingURL=main.71537636.chunk.js.map